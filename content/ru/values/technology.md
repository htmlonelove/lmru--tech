---
title: "Технологии"
weight: 30
type: docs
menu:
    main:
        parent: "Инженерная культура"
description: Рассказываем, как внедряем новые технологии, зачем пишем код в соответствии с требованиями InnerSource и почему тестирование так же важно, как разработка.
---

## 1. Весь код соответствует минимальным [требованиям InnerSource](https://adeo.github.io/innersource/)

* Код доступен для каждого сотрудника и хранится в GitHub.
* Всё, что не соответствует требованиям InnerSource, считается техническим долгом. 
* Код-ревью — это обязательно. 

{{< blocks/practice >}}
#### Практики и ритуалы 
{{< glossary title="Правило 30%" text="Каждый инженер может использовать часть рабочего времени на исследовательские задачи, работу над техническим долгом или обучение. Процент времени определяет технический лидер совместно с продуктовой командой." >}}

{{< glossary title="Правило Бойскаута" text="У настоящих бойскаутов есть правило: оставляй поляну чище, чем она была до тебя. Наша версия: оставляй код лучше, чем он был до тебя. [Как говорил Дядюшка Боб](https://www.oreilly.com/library/view/97-things-every/9780596809515/ch08.html), беспорядок в коде нужно порицать так же, как мусор на улице. ">}}

{{< glossary title="Правила контрибуции" text="В каждом репозитории описано, как обрабатывать изменения в коде. Например, работа с пулл-реквестами, процесс код-ревью и настройки защищённых веток в гите. ">}}

{{< /blocks/practice >}}


{{< alert color="warning" title="Антипаттерн" >}}Закрытый репозиторий без readme файла и мейнтенеров работает в&nbsp;продакшене.{{< /alert >}}

---

## 2. Автоматизируем по возможности всё

* Предпочитаем автотесты ручному тестированию.
* Осуществляем билд и деплой с помощью CI-инструментов

{{< blocks/practice >}}
#### Практики и ритуалы 

{{< glossary title="DevOps" text="Дружба между разработчиками и опсами :) Если серьёзно, то рекомендуем [книгу](https://www.amazon.com/Phoenix-Project-DevOps-Helping-Business/dp/0988262592).">}}

{{< glossary title="IaC" text="Infrastructure as Code — инфраструктура как код. Мы используем автоматические конфигурационные файлы вместо простого накликивания через веб-интерфейс. Эти файлы содержат сценарий подготовки инфраструктуры, билда и деплоя приложения.">}}

{{< /blocks/practice >}}


{{< alert color="warning" title="Антипаттерн" >}}Страшно делать релиз из-за большого объёма ручного труда и редкого события.{{< /alert >}}

---

## 3. Согласуем выбор технологии с [Таблицей технологий]({{< ref "stack/table" >}})

* Таблицу поддерживает Технологический комитет.
* Все движения в основной таблице зарегистрированы в таблице движений.
* Поддерживаем тестирование новых технологий. 

{{< blocks/practice >}}
#### Практики и ритуалы 
{{< glossary title="Технологический Комитет" text="Это сообщество архитекторов предприятия, технических архитекторов и технических лидеров команд разработки и IT-инфраструктуры. Комитет собирается минимум раз в месяц и отбирает технологии, которые помогут эффективнее использовать ресурсы компании. Это могут быть языки программирования, платформы и библиотеки, инструменты и подходы в контексте конкретных сценариев использования.">}}

{{< /blocks/practice >}}

{{< alert color="warning" title="Антипаттерн" >}}Менеджер заказал у внешней компании разработку неподдерживаемого приложения «чёрный ящик»&nbsp; на 1С.{{< /alert >}}

---

## 4. Фронтовые приложения следуют [Дизайн-системе](https://fronton.leroymerlin.ru/){:target="_blank"}

* Дизайн-система доступна пока только из внутренней сети.
* Все бизнес-настройки конфигурируются через веб-интерфейс.

{{< blocks/practice >}}

#### Практики и ритуалы
{{< glossary title="Дизайн Система" text="Дизайн-система — это набор правил и инструментов для визуального и технического исполнения, который отражает философию продукта и постоянно развивается. ">}}

{{< /blocks/practice >}}


{{< alert color="warning" title="Антипаттерн" >}}

Созданное в магазине приложение использует шрифт Comic Sans.

{{< /alert >}}

---

## 5. Строим надёжные приложения и инфраструктуру

* Узнаём о проблемах в проде быстрее пользователей.
* Предпочитаем stateless приложения, запускаем их в контейнерах и используем оркестратор.
* Приложения корректно переносят частичные отказы.
* Приложения и базы данных реплицированы и поддерживают шардинг.
* Приложения корректно обрабатывают некорректные входящие запросы и отдают только корректные ответы.
* Сервисы предоставляют и контролируют SLO.
* Инфраструктура ключевых систем построена по принципу мастер-мастер репликации.


{{< blocks/practice >}}
#### Практики и ритуалы
{{< glossary title="VALET" text="Гугловский способ измерения SLO.<br>Volume (traffic) — Объём трафика — какой объём бизнес транзакций сервис может обработать?<br>Availability — Доступность — насколько сервис готов бесперебойно обслуживать посетителей?<br>Latency — Задержка — насколько быстро отвечает сервис?<br>Errors — Ошибки — правильно ли ведется учет и «расходование» бюджета ошибок?<br>Tickets — Тикеты — насколько часто необходимо обслуживать сервис в ручном режиме?" >}}

{{< glossary title="Фича флаги" text="По-другому этот подход называют feature toggling. Суть в том, чтобы добавлять новую функциональность как подключаемый модуль, который можно отключить в любой момент.">}}

{{< glossary title="Распределённый Трейсинг" text="Каждый запрос на входе получает уникальный трейс-ID — этот идентификатор передаётся в каждом последующем вызове.">}}

{{< glossary title="Телеметрия" text="Приложения выставляют наружу эндпоинт с показателями жизни для анализа и мониторинга.">}}

{{< /blocks/practice >}}

{{< alert color="warning" title="Антипаттерн" >}} Созданное в магазине приложение использует шрифт Comic Sans.{{< /alert >}}

---

## 6. Тестирование так же важно, как разработка

* Тестирование начинается на этапе формирования требований.
* В каждой продуктовой команде есть минимум один QA-инженер.
* Код покрывается тестами сразу — тестирование не откладывается в бэклог.
* Приложения и базы данных реплицированы и поддерживают шардинг.
* Приложения корректно обрабатывают некорректные входящие запросы и отдают только корректные ответы.
* Сервисы предоставляют и контролируют SLO.
* Инфраструктура ключевых систем построена по принципу мастер-мастер репликации.



{{< blocks/practice >}}

#### Практики и ритуалы 
{{< glossary title="Динамические тестовые окружения" text="Проводим тестирование системы на динамически поднятом окружении — оно включает в себя все необходимые зависимости (внешние зависимости лучше заменять моками). Доступ к таким окружениям ограничен, чтобы ничто не могло повлиять на тестирование. После тестирования удаляем окружение.">}}

{{< glossary title="Мокирование" text="В тестировании лучше избегать зависимости от внешних систем — они нестабильны, а доступ к тестовым данным может быть ограничен. Вместо них можно использовать мок-эмулятор системы, который повторяет её поведение в необходимом объёме, но не воспроизводит внутреннюю логику.">}}

{{< glossary title="Тестирование производительности" text="Вид тестирования, при котором тестируется не логика системы, а её быстродействие.В качестве критериев производительности бэкенда используются следующие метрики:<br> * количество запросов в секунду; * время отклика; * процент ошибок; * утилизация ресурсов системы. * Для тестирования производительности фронтэнда используют Google Lighthouse и его метрики. Бэкенд лучше тестировать при помощи Gatling. ">}}

{{< glossary title="Канареечное развёртывание" text="Канареечное развёртывание помогает снизить негативное воздействие релизов, в которых пропущены баги. Суть стратегии: сначала развёртывать изменения на небольшом подмножестве серверов, а после теста — на остальных серверах. [Читать больше](https://octopus.com/docs/deployment-patterns/canary-deployments#:~:text=Canary%20deployments%20are%20a%20pattern,the%20rest%20of%20the%20servers.)">}}

{{< /blocks/practice >}}

{{< alert color="warning" title="Антипаттерн" >}}Функциональное тестирование на продакшене создает реальные инциденты.{{< /alert >}}

{{< blocks/button-improvement href="#" text="Предложить улучшения">}}
